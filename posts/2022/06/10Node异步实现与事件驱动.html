<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node 异步实现与事件驱动 | Alpen</title>
    <meta name="description" content="坚持深耕技术领域的 T 型前端程序员, 关注独立开发与 AI，喜欢 Vuejs、Nestjs, 还会点 Python、搜索引擎、NLP、Web3、后端">
    <meta name="generator" content="VitePress v1.2.2">
    <link rel="preload stylesheet" href="/assets/style.By2sulwM.css" as="style">
    
    <script type="module" src="/assets/app.BQ2AmNcx.js"></script>
    <link rel="modulepreload" href="/assets/chunks/framework.kYnPRA0Y.js">
    <link rel="modulepreload" href="/assets/chunks/theme.D9qXolWs.js">
    <link rel="modulepreload" href="/assets/posts_2022_06_10Node异步实现与事件驱动.md.Bx5mS8Pc.lean.js">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MB7XVBG1TQ"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MB7XVBG1TQ");</script>
    <link rel="icon" href="https://20021217.xyz/Alpen.favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta property="og:url" content="https://alpenl.github.io/posts/2022/06/10Node异步实现与事件驱动.md">
    <meta property="og:title" content="Node 异步实现与事件驱动">
    <meta property="og:description" content="坚持深耕技术领域的 T 型前端程序员, 关注独立开发与 AI，喜欢 Vuejs、Nestjs, 还会点 Python、搜索引擎、NLP、Web3、后端">
    <meta property="og:image" content="https://20021217.xyz/Alpen.Alpen.jpg">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="坚持深耕技术领域的 T 型前端程序员, 关注独立开发与 AI，喜欢 Vuejs、Nestjs, 还会点 Python、搜索引擎、NLP、Web3、后端">
    <meta name="twitter:image:src" content="https://20021217.xyz/Alpen.Alpen.jpg">
    <link rel="preload" href="/assets/FiraCode-VF.Bc8wnsZt.woff2" as="font" type="font/woff2" crossorigin="">
  </head>
  <body><!----><!--teleport anchor-->
    <div id="app"><div class="Layout" data-v-0e701fc0><!--[--><div class="wechat-qrcode-container" data-v-ea10ad09><!----></div><!--]--><!--[--><span tabindex="-1" data-v-54d91f83></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-54d91f83> Skip to content </a><!--]--><!----><header class="VPNav" data-v-0e701fc0 data-v-6eb8791a><div class="VPNavBar top" data-v-6eb8791a data-v-e4aa3f06><div class="wrapper" data-v-e4aa3f06><div class="container" data-v-e4aa3f06><div class="title" data-v-e4aa3f06><div class="VPNavBarTitle" data-v-e4aa3f06 data-v-62933a5b><a class="title" href="/" data-v-62933a5b><!--[--><!--]--><!----><span data-v-62933a5b>Alpen</span><!--[--><!--]--></a></div></div><div class="content" data-v-e4aa3f06><div class="content-body" data-v-e4aa3f06><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e4aa3f06><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e4aa3f06 data-v-40129af8><span id="main-nav-aria-label" class="visually-hidden" data-v-40129af8>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-40129af8 data-v-3b079265><!--[--><span data-v-3b079265>博客</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/archive" tabindex="0" data-v-40129af8 data-v-3b079265><!--[--><span data-v-3b079265>归档</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/notes/" tabindex="0" data-v-40129af8 data-v-3b079265><!--[--><span data-v-3b079265>笔记</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about" tabindex="0" data-v-40129af8 data-v-3b079265><!--[--><span data-v-3b079265>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e4aa3f06 data-v-6701f2ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6701f2ad data-v-50fbef02 data-v-e3839bc9><span class="check" data-v-e3839bc9><span class="icon" data-v-e3839bc9><!--[--><span class="vpi-sun sun" data-v-50fbef02></span><span class="vpi-moon moon" data-v-50fbef02></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e4aa3f06 data-v-373d2acb data-v-7075ea17><!--[--><a class="VPSocialLink no-icon" href="javascript:;" aria-label="wechat" target="_blank" rel="noopener" data-v-7075ea17 data-v-85b562d3><svg t="1710861492265" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z" fill="currentColor"></path><path d="M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34.1c1.7 1 3.3 1.7 5.2 1.7 5 0 9-4.1 9-9.1 0-2.2-0.8-4.3-1.4-6.6-3.8-13.7-9.8-35.3-12.2-43.9-0.5-1.9-0.9-3.8-0.9-5.7 0.1-6.1 3-11.4 7.5-14.9zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z" fill="currentColor"></path></svg></a><a class="VPSocialLink no-icon" href="https://github.com/Alpenl" aria-label="github" target="_blank" rel="noopener" data-v-7075ea17 data-v-85b562d3><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e4aa3f06 data-v-8327d160 data-v-aeaa4f3c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-aeaa4f3c><span class="vpi-more-horizontal icon" data-v-aeaa4f3c></span></button><div class="menu" data-v-aeaa4f3c><div class="VPMenu" data-v-aeaa4f3c data-v-84920dff><!----><!--[--><!--[--><!----><div class="group" data-v-8327d160><div class="item appearance" data-v-8327d160><p class="label" data-v-8327d160>深色模式</p><div class="appearance-action" data-v-8327d160><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8327d160 data-v-50fbef02 data-v-e3839bc9><span class="check" data-v-e3839bc9><span class="icon" data-v-e3839bc9><!--[--><span class="vpi-sun sun" data-v-50fbef02></span><span class="vpi-moon moon" data-v-50fbef02></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8327d160><div class="item social-links" data-v-8327d160><div class="VPSocialLinks social-links-list" data-v-8327d160 data-v-7075ea17><!--[--><a class="VPSocialLink no-icon" href="javascript:;" aria-label="wechat" target="_blank" rel="noopener" data-v-7075ea17 data-v-85b562d3><svg t="1710861492265" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z" fill="currentColor"></path><path d="M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34.1c1.7 1 3.3 1.7 5.2 1.7 5 0 9-4.1 9-9.1 0-2.2-0.8-4.3-1.4-6.6-3.8-13.7-9.8-35.3-12.2-43.9-0.5-1.9-0.9-3.8-0.9-5.7 0.1-6.1 3-11.4 7.5-14.9zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z" fill="currentColor"></path></svg></a><a class="VPSocialLink no-icon" href="https://github.com/Alpenl" aria-label="github" target="_blank" rel="noopener" data-v-7075ea17 data-v-85b562d3><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e4aa3f06 data-v-d48b6956><span class="container" data-v-d48b6956><span class="top" data-v-d48b6956></span><span class="middle" data-v-d48b6956></span><span class="bottom" data-v-d48b6956></span></span></button></div></div></div></div><div class="divider" data-v-e4aa3f06><div class="divider-line" data-v-e4aa3f06></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-0e701fc0 data-v-ca5965db><div class="container" data-v-ca5965db><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-ca5965db data-v-28fca172><button data-v-28fca172>回到顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-0e701fc0 data-v-0eb1be73><div class="VPDoc has-aside" data-v-0eb1be73 data-v-ecd7d1e4><!--[--><!--]--><div class="container" data-v-ecd7d1e4><div class="aside" data-v-ecd7d1e4><div class="aside-curtain" data-v-ecd7d1e4></div><div class="aside-container" data-v-ecd7d1e4><div class="aside-content" data-v-ecd7d1e4><div class="VPDocAside" data-v-ecd7d1e4 data-v-404059ef><!--[--><!--[--><!--[--><!--[--><button style="margin-bottom:10px;" class="t-button t-button--variant-dashed t-button--theme-default" type="button" href tabindex="0" data-v-14104950><!--[--><!--[--><svg fill="none" viewBox="0 0 24 24" width="1em" height="1em" class="t-icon t-icon-rollback" style="" data-v-14104950><path fill="currentColor" d="M20.93 14A7 7 0 0114 20H5.5v-2H14a5 5 0 100-10H6.91l2.5 2.5L8 11.91 3.09 7 8 2.09 9.41 3.5 6.91 6H14a7 7 0 017 7v1h-.07z"></path></svg><!--]--><span class="t-button__text"><!--[--> 返回上一页<!--]--></span><!--]--></button><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-404059ef data-v-b425fa5a><div class="content" data-v-b425fa5a><div class="outline-marker" data-v-b425fa5a></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b425fa5a>当前页面</div><ul class="VPDocOutlineItem root" data-v-b425fa5a data-v-2439b230><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-404059ef></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-ecd7d1e4><div class="content-container" data-v-ecd7d1e4><!--[--><!--]--><main class="main" data-v-ecd7d1e4><div style="position:relative;" class="vp-doc _posts_2022_06_10Node%E5%BC%82%E6%AD%A5%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8 external-link-icon-enabled" data-v-ecd7d1e4><div><h1 id="node-异步实现与事件驱动" tabindex="-1">Node 异步实现与事件驱动 <a class="header-anchor" href="#node-异步实现与事件驱动" aria-label="Permalink to &quot;Node 异步实现与事件驱动&quot;">​</a></h1><blockquote><p>✨文章摘要（AI生成）</p></blockquote><p>在重新阅读《深入浅出 NodeJS》的过程中，我深入理解了 Node 的异步实现与事件驱动特性。Node 通过单线程结合异步 I/O，避免了多线程带来的复杂性和性能开销。它利用非阻塞 I/O 与事件循环机制，允许 CPU 在等待 I/O 操作时处理其他任务，从而提高了资源利用率。</p><p>我学习了阻塞与非阻塞 I/O 的区别，以及不同轮询方法（如<code>select</code>、<code>poll</code>、<code>epoll</code>等）的优缺点。Node 内部虽是多线程处理 I/O，但开发者的 JavaScript 代码仍在单线程中运行。此外，<code>setTimeout</code>、<code>setImmediate</code>和<code>process.nextTick</code>等 API 的实现原理与异步 I/O 相似，但不需要线程池的介入。</p><p>通过事件驱动模型，Node 能够高效地处理网络请求，解决了如雪崩问题等性能挑战。这一切都让我对 Node 的异步处理有了更深的理解。</p><hr><blockquote><p>这是重新阅读《深入浅出 NodeJS》的相关笔记，这次阅读发现自己依旧收获很多，而第一次阅读的东西也差不多忘记完了，所以想着这次过一遍脑子，用自己的理解输出一下，方便记忆以及以后回忆...</p></blockquote><h2 id="node-的特点" tabindex="-1">Node 的特点 <a class="header-anchor" href="#node-的特点" aria-label="Permalink to &quot;Node 的特点&quot;">​</a></h2><blockquote><p>计算机中的一些任务一般可以划分为两个类别，一个类别叫做 IO 密集型，一个叫做计算密集型；对于计算密集型的任务，只能不断榨干 CPU 的性能，但是对于 IO 密集型的任务来说，理想情况下却并不需要，只需要通知 IO 设备进行处理，过一段时间再来拿去数据就好了。</p></blockquote><p>对于某些场景有一些互不相关的任务需要完成，现行的主流方法有如下两种：</p><ul><li>多线程并行完成：多线程的代价在于创建线程和执行线程上下文切换的开销较大。另外，在复杂的业务中，多线程编程经常面临锁、状态同步等问题；</li><li>单线程顺序执行：易于表达，但串行执行的缺点在于性能，任意一个略慢的任务都会导致后续代码被组设</li></ul><p><code>node</code>在两者之前给出了它的方案：利用单线程，远离多线程死锁、状态同步等问题；利用异步 IO，让单线程远离阻塞，以更好地使用 CPU</p><p><img src="https://oss.justin3go.com/blogs/%E5%BC%82%E6%AD%A5IO%E8%B0%83%E7%94%A8%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt=""></p><h2 id="node-是如何实现异步的" tabindex="-1">Node 是如何实现异步的 <a class="header-anchor" href="#node-是如何实现异步的" aria-label="Permalink to &quot;Node 是如何实现异步的&quot;">​</a></h2><blockquote><p>刚才讲了<code>node</code>在多任务处理的方案，但是<code>node</code>内部想要实现却并不容易，下面介绍操作系统的几个概念，方面后续大家更好理解，后面再讲一讲异步的实现以及 node 的事件循环机制：</p></blockquote><h3 id="阻塞-io-与非阻塞-io" tabindex="-1">阻塞 IO 与非阻塞 IO <a class="header-anchor" href="#阻塞-io-与非阻塞-io" aria-label="Permalink to &quot;阻塞 IO 与非阻塞 IO&quot;">​</a></h3><ul><li>阻塞 IO：应用层面发起 IO 调用之后，就一直等待数据，等操作系统内核层面完成所有操作后，调用才结束；</li></ul><blockquote><p>操作系统中一切皆文件，输入输出设备同样被抽象为了文件，内核在执行 IO 操作时，通过<strong>文件描述符</strong>进行管理</p></blockquote><ul><li>非阻塞 IO：差别为调用后立即返回一个文件描述符，并不等待，这时候 CPU 的时间片就可以用来处理其他事务，之后可以通过这个文件描述符进行结果的获取；</li></ul><p>非阻塞 IO 存在的一些问题：虽然其让 CPU 的利用率提高了，但是由于立即返回的是一个文件描述符，我们并不知道 IO 操作什么时候完成，为了确认状态变更，我们只能作轮询操作</p><h3 id="不同的轮询方法" tabindex="-1">不同的轮询方法 <a class="header-anchor" href="#不同的轮询方法" aria-label="Permalink to &quot;不同的轮询方法&quot;">​</a></h3><ul><li><code>read</code> ：最原始、性能最低的一种，通过<strong>重复检查 IO 状态</strong>来完成完整数据的获取</li><li><code>select</code>：通过对<strong>文件描述符上的事件状态</strong>来进行判断，相对来说消耗更少；缺点就是它采用了一个 1024 长度的数组来存储状态，所以它最多可以同时检查 1024 个文件描述符</li><li><code>poll</code>：由于<code>select</code>的限制，<code>poll</code>改进为链表的存储方式，其他的基本都一致；但是当文件描述符较多的时候，它的性能还是非常低下的</li><li><code>eopll</code>：该方案是<code>linux</code>下效率最高的 IO 事件通知机制，在进入轮询的时候如果没有检查 IO 事件，将会进行休眠，直到事件发生将它唤醒</li><li><code>kqueue</code>：与<code>epoll</code>类似，不过仅在 FreeBSD 系统下存在</li></ul><p>尽管<code>epoll</code>利用了事件来降低对 CPU 的耗用，但休眠期间 CPU 几乎是闲置的；我们期待的异步 IO 应该是应用程序发起非阻塞调用，无须通过遍历或事件唤醒等方式轮询，可以直接处理下一个任务，只需 IO 完成后通过信号或者回调将数据传递给应用程序即可。</p><blockquote><p>linux 下还有中 AIO 方式就是通过信号或回调来传递数据的，不过只有 Linux 有，并且有限制无法利用系统缓存</p></blockquote><h3 id="node-中对于异步-io-的实现" tabindex="-1">node 中对于异步 IO 的实现 <a class="header-anchor" href="#node-中对于异步-io-的实现" aria-label="Permalink to &quot;node 中对于异步 IO 的实现&quot;">​</a></h3><p>先说结论，<code>node</code>对异步 IO 的实现是通过多线程实现的。可能会混淆的地方就是<code>node</code>内部虽然是多线程的，但是我们程序员开发的<code>JavaScript</code>代码却仅仅是运行在单线程上的。</p><p><code>node</code>通过部分线程进行阻塞 IO 或者非阻塞 IO 加上轮询技术来完成数据获取，让一个线程进行计算处理，通过线程之间的通信将 IO 得到的数据进行传递，这就轻松实现了异步 IO 的模拟。</p><p><img src="https://oss.justin3go.com/blogs/node%E5%BC%82%E6%AD%A5IO.png" alt=""></p><p>除了异步 IO，计算机中的其他资源也适用，因为 linux 中一切皆文件，磁盘、硬件、套接字等几乎所有计算机资源都被抽象为了文件，接下来介绍对计算机资源的调用都以 IO 为例子。</p><h3 id="事件循环" tabindex="-1">事件循环 <a class="header-anchor" href="#事件循环" aria-label="Permalink to &quot;事件循环&quot;">​</a></h3><p>在进程启动时，<code>node</code>便会创建一个类似与<code>while(true)</code>的循环，每执行一次循环体的过程我们成为<code>Tick</code>；</p><p>下方为<code>node</code>中事件循环流程图：</p><p><img src="https://oss.justin3go.com/blogs/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt=""></p><p>很简单的一张图，简单解释一下：就是每次都从 IO 观察者里面获取执行完成的事件（是个请求对象，简单理解就是包含了请求中产生的一些数据），然后没有回调函数的话就继续取出下一个事件（请求对象），有回调就执行回调函数</p><h2 id="异步-io-细节" tabindex="-1">异步 IO 细节 <a class="header-anchor" href="#异步-io-细节" aria-label="Permalink to &quot;异步 IO 细节&quot;">​</a></h2><p><img src="https://oss.justin3go.com/blogs/%E6%95%B4%E4%B8%AA%E5%BC%82%E6%AD%A5IO%E7%9A%84%E6%B5%81%E7%A8%8B.png" alt=""></p><blockquote><p>注：不同平台有不同的细节实现，这张图隐藏了相关平台兼容细节，比如 windows 下使用 IOCP 中的<code>PostQueuedCompletionStatus()</code>提交执行状态，通过<code>GetQueuedCompletionStatus</code>获取执行完成的请求，并且 IOCP 内部实现了线程池的细节，而 linux 等平台通过<code>eopll</code>实现这个过程，并在<code>libuv</code>下自实现了线程池</p></blockquote><h2 id="settimtout与setinterval" tabindex="-1"><code>setTimtout</code>与<code>setInterval</code> <a class="header-anchor" href="#settimtout与setinterval" aria-label="Permalink to &quot;`setTimtout`与`setInterval`&quot;">​</a></h2><p>除了 IO 等计算机资源需要异步调用之外，<code>node</code>本身还存在一些与异步 IO 无关的一些<strong>其他异步 API</strong>：</p><ul><li><code>setTimeout</code></li><li><code>setInterval</code></li><li><code>setImmediate</code></li><li><code>process.nextTick</code></li></ul><blockquote><p>该小节先讲解前面两个 api</p></blockquote><p>它们的实现原理与异步 IO 比较类似，<strong>只是不需要 IO 线程池的参与</strong>：</p><ul><li><code>setTimtout</code>与<code>setInterval</code>创建的定时器会被插入到定时器观察者内部的一个红黑树中</li><li>每次<code>tick</code>执行的时候，会从该红黑树中迭代取出定时器对象，检查是否超过定时时间</li><li>如果超过，就将这个事件（请求对象）推入到事件队列中，在事件循环中执行其中的回调函数</li></ul><blockquote><p>红黑树：这里简单提一下，就是一种特殊化的平衡二叉树，可以自平衡，查找效率基本上就是该二叉树的深度了<mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.682ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3837.6 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1450,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z" style="stroke-width:3;"></path></g><g data-mml-node="msub" transform="translate(1935,0)"><g data-mml-node="mi"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mi" transform="translate(2848.6,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(3448.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></p></blockquote><p>你有考虑过这个问题吗，为什么定时器不需要线程池的参与了呢，如果你理解了之前章节对于异步 IO 实现原理的话，相信你应该能解释出来，这里简单说说原因来加深记忆：</p><p><strong><code>node</code>中的 IO 线程池是用来调用 IO 并等待数据返回（看具体实现）的一种方式，它使<code>JavaScript</code>单线程得以异步调用 IO，并且不需要等待 IO 执行完成（因为是 IO 线程池做了），并且能获取到最终的数据（通过观察者模式：IO 观察者从线程池获取执行完成的事件，事件循环机制执行后续的回调函数）</strong></p><p>上述这段话可能有点简略，如果你还不明白，可以看下之前的那几种图~</p><h2 id="process-nexttick与setimmediate" tabindex="-1"><code>process.nextTick</code>与<code>setImmediate</code> <a class="header-anchor" href="#process-nexttick与setimmediate" aria-label="Permalink to &quot;`process.nextTick`与`setImmediate`&quot;">​</a></h2><p>这两个函数都是代表立即异步执行一个函数，那为什么不用<code>setTimeout(() =&gt; { ... }, 0)</code>来完成呢？</p><ul><li>定时器精度不够</li><li>定时器使用红黑树来创建定时器对象和迭代操作，浪费性能</li><li>即<code>process.nextTick</code>更加轻量</li></ul><p>轻量具体来说：我们在每次调用<code>process.nextTick</code>的时候，只会将回调函数放入队列中，在下一轮<code>Tick</code>时取出执行。定时器中采用红黑树的方式时<mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.682ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3837.6 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1450,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z" style="stroke-width:3;"></path></g><g data-mml-node="msub" transform="translate(1935,0)"><g data-mml-node="mi"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mi" transform="translate(2848.6,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(3448.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>，<code>nextTick</code>为<mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.618ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2041 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(1152,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(1652,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></p><p>那<code>process.nextTick</code>与<code>setImmediate</code>又有什么区别呢？毕竟它们都是将回调函数立即异步执行</p><ul><li><code>process.nextTick</code>的回调执行优先级高于<code>setImmediate</code></li><li><code>process.nextTick</code>的回调函数保存在一个数组中，每轮事件循环下全部执行，<code>setImmediate</code>的结果则是保存在链表中，每轮循环按序执行第一个回调</li></ul><p>注意：之所以<code>process.nextTick</code>的回调执行优先级高于<code>setImmediate</code>，因为事件循环对观察者的检查是有顺序的，<code>process.nextTick</code>属于<code>idle</code>观察者，<code>setImmediate</code>属于<code>check</code>观察者。<code>iedl 观察者 &gt; IO 观察者 &gt; check 观察者</code></p><h2 id="高性能服务器" tabindex="-1">高性能服务器 <a class="header-anchor" href="#高性能服务器" aria-label="Permalink to &quot;高性能服务器&quot;">​</a></h2><blockquote><p>对于网络套接字的处理，<code>node</code>也应用到了异步 IO，网络套接字上侦听到的请求都会形成事件交给 IO 观察者，事件循环会不停地处理这些网络 IO 事件，如果我们在<code>JavaScrpt</code>层面上有传入对应的回调函数，这些回调函数就会在事件循环中执行（处理这些网络请求）</p></blockquote><p>常见的服务器模型：</p><ul><li>同步式</li><li>每进程--&gt;每请求</li><li>每线程--&gt;每请求</li></ul><p>而<code>node</code>采用的是事件驱动的方式处理这些请求，无需对每个请求创建额外的对应线程，可以省略掉创建线程和销毁线程的开销，同时操作系统的调度任务因为线程较少（只有<code>node</code>内部实现的一些线程）上下文切换的代价很低。</p><p>经典问题--<strong>雪崩问题</strong>的解决：</p><p>问题描述：服务器在刚启动时，缓存无数据，如果访问量巨大，同一条<code>SQL</code>会被发送到数据库中反复查询，影响性能。</p><p>解决方案：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> events.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 状态锁，避免反复查询</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;selected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 绑定一个只执行一次名为 selected 的事件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pending&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// sql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SQL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;selected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 触发事件,返回查询数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>使用<code>once</code>将所有请求的回调都压入了事件队列中，利用其只执行一次就会将监视器移除的特点，保证每一个回调函数只会被执行一次。对于相同的 SQL 语句，保证在同一个查询开始到结束的过程中永远只有一次。新到来的相同调用只需在队列中等待数据就绪即可，一旦查询到结果，得到的结果就可以被这些调用共同使用。</p><h2 id="最后" tabindex="-1">最后 <a class="header-anchor" href="#最后" aria-label="Permalink to &quot;最后&quot;">​</a></h2><p>基本都是参考《深入浅出 NodeJS》这本书的并夹带了一些自己的理解，如果我理解有误的话，欢迎友善指出🎉</p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li>《深入浅出 NodeJS》</li></ul></div></div></main><footer class="VPDocFooter" data-v-ecd7d1e4 data-v-f9762a49><!--[--><!--]--><div class="edit-info" data-v-f9762a49><!----><div class="last-updated" data-v-f9762a49><p class="VPLastUpdated" data-v-f9762a49 data-v-f1369e09>最近更新时间: <time datetime="2025-01-31T17:24:27.000Z" data-v-f1369e09></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><div class="comments" data-v-895a6996><!----></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="image-viewer"><!--[--><!--[--><!--[--><!----><!--teleport start--><!--teleport end--><!--]--><!--]--><!--]--></div><!--]--><!--]--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"notes_ai相关_index.md\":\"Csw6Epzw\",\"notes_nestjs_index.md\":\"sEhkKGyu\",\"notes_chatgpt提示学习_chatgpt提示学习笔记3.md\":\"DhQvODYW\",\"notes_python基础_05一等函数.md\":\"CWWwI-hF\",\"notes_vue相关_index.md\":\"D81CugZx\",\"notes_rust基础学习_01认识cargo.md\":\"DOmbxcas\",\"notes_python基础_19元编程.md\":\"BG6L7k59\",\"notes_nestjs_04dto.md\":\"HIttKBhi\",\"notes_python基础_07函数装饰器与闭包.md\":\"BL4f1bfB\",\"notes_rust基础学习_04所有权与借用.md\":\"CDaX68Q7\",\"about.md\":\"CkU_tGO2\",\"notes_python基础_08对象引用、可变性和垃圾回收.md\":\"DxRkMuNE\",\"notes_rust基础学习_16返回值和错误处理.md\":\"Djm_JD7a\",\"notes_rust基础学习_20实战-文件搜索工具.md\":\"DEMc1ryb\",\"notes_web3.0_00solidity8新特性.md\":\"Dy9n7Y15\",\"notes_rust基础学习_05复合类型.md\":\"Do79lPqU\",\"notes_rust基础学习_11特征对象.md\":\"CN-ZOM2D\",\"notes_python基础_03字典与集合.md\":\"C35i9AGt\",\"archive.md\":\"CBpV3sP6\",\"notes_vue相关_04vue3-reactivity.md\":\"dVQ9ShHW\",\"notes_rust基础学习_02变量绑定与解构.md\":\"CiN4vpAS\",\"notes_rust基础学习_03基本类型.md\":\"CJNK-JBN\",\"notes_rust基础学习_13动态数组vector.md\":\"B00fIg8y\",\"notes_python基础_10序列的修改、散列和切片.md\":\"-ojqVE8p\",\"index.md\":\"DsBRdHBy\",\"notes_python基础_18使用asyncio包处理并发.md\":\"C2mdn0Fg\",\"notes_rust基础学习_14kv存储hashmap.md\":\"wypEcp5_\",\"notes_vue相关_01vue3是如何运行的.md\":\"B4Til-zv\",\"notes_css相关_flex_布局教程：语法篇.md\":\"OyMFrJB_\",\"notes_python基础_12继承的优缺点.md\":\"DvC2VNj3\",\"notes_python基础_02序列构成的数组.md\":\"BwQinec9\",\"notes_chatgpt提示学习_chatgpt提示学习笔记4.md\":\"B7sX-KIr\",\"notes_chatgpt提示学习_chatgpt提示学习笔记1_2.md\":\"j4pNQOow\",\"notes_python基础_09符合python风格的对象.md\":\"Dia_FajB\",\"notes_web3.0_01solidity8基本语法.md\":\"CSZujYeQ\",\"notes_python基础_06使用一等函数实现设计模式.md\":\"DV57pM_5\",\"notes_nestjs_07应用配置.md\":\"BEEyl3ts\",\"notes_rust基础学习_12深入特征.md\":\"CbQCJUaw\",\"notes_chatgpt提示学习_chatgpt提示学习笔记8.md\":\"DUUur1ZN\",\"notes_python基础_11接口：从协议到抽象基类.md\":\"NYozk0pY\",\"notes_chatgpt提示学习_chatgpt提示学习笔记7.md\":\"bCuSFutM\",\"notes_rust基础学习_17包和模块.md\":\"BU8SzNkV\",\"notes_rust基础学习_10特征.md\":\"CWu3_pkj\",\"notes_python基础_13正确重载运算符.md\":\"PSs0Y_YY\",\"notes_javascript_index.md\":\"DBE53vwD\",\"notes_python基础_17使用future处理并发.md\":\"Di-V2O5v\",\"notes_nestjs_03module.md\":\"oftYrpwo\",\"notes_chatgpt提示学习_chatgpt提示学习笔记6.md\":\"DQudU2Y7\",\"notes_rust基础学习_19格式化输出.md\":\"9w1QXMhh\",\"notes_nestjs_05postgresql.md\":\"BG__iGW3\",\"notes_vue相关_03虚拟dom.md\":\"BJ8KDEoz\",\"notes_chatgpt提示学习_chatgpt提示学习笔记5.md\":\"DLwWXmts\",\"notes_rust基础学习_06流程控制.md\":\"CZcoZsp1\",\"notes_vue相关_05mini-vue.md\":\"CBCds6QL\",\"notes_nestjs_09openapi.md\":\"D40JaYrh\",\"notes_nestjs_08更多模块.md\":\"BXWKPnd9\",\"notes_javascript_02nodejs详细教程.md\":\"D94q2F1H\",\"notes_nestjs_02service.md\":\"DonJqoYn\",\"notes_rust基础学习_18注释和文档.md\":\"Bn68zqR5\",\"notes_nestjs_06原理细节.md\":\"D8cvuSSs\",\"notes_vue相关_06vue3其他.md\":\"CE2nl89V\",\"notes_python基础_15上下文管理和else块.md\":\"BuZztPcp\",\"notes_python基础_14可迭代的对象、迭代器和生成器.md\":\"DOIu6X-I\",\"notes_rust基础学习_07模式匹配.md\":\"D99kv47_\",\"notes_python基础_16协程.md\":\"Dti8OoqD\",\"notes_threejs入门_03基于物理的渲染和照明.md\":\"A-RzkY99\",\"notes_threejs入门_05动画循环.md\":\"EU2oyq24\",\"notes_threejs入门_04变换、坐标系和场景图.md\":\"CaqpGZ1W\",\"notes_vue相关_02vue3编译器.md\":\"C6fPSzCb\",\"notes_nestjs_01controller.md\":\"DZyL1WGX\",\"notes_threejs入门_06纹理映射.md\":\"lolj-RPI\",\"notes_threejs入门_07插件.md\":\"ip9kxGvY\",\"notes_web3.0_02solidity8高级.md\":\"b2ogtJcM\",\"notes_python基础_04文本与字节序列.md\":\"Dz2HImKf\",\"notes_rust基础学习_08方法method.md\":\"CHq-x97H\",\"notes_threejs入门_08环境光.md\":\"BsjznyQZ\",\"notes_threejs入门_09组织你的场景.md\":\"kb5VBWMy\",\"notes_rust基础学习_15认识生命周期.md\":\"BnP0Js7j\",\"notes_web3.0_03solidity8进阶.md\":\"CdeW-w1L\",\"notes_web3.0_index.md\":\"CqkoElGP\",\"notes_python基础_01python数据模型.md\":\"DogfmDzP\",\"notes_rust基础学习_09泛型.md\":\"angU9eXa\",\"notes_threejs入门_02一个基本的threejs应用.md\":\"CIVJQ3tL\",\"notes_index.md\":\"CQHXouaB\",\"notes_javascript_01js常见手写面试题.md\":\"Dip2SabB\",\"notes_nestjs_10测试.md\":\"BejcRjsy\",\"notes_threejs入门_01起步.md\":\"BFWxxd_P\",\"notes_threejs入门_10内置几何体.md\":\"boE6nUbw\",\"notes_threejs入门_11以gltf格式加载3d模型.md\":\"DDHIxYdJ\",\"notes_threejs入门_12threejs动画系统.md\":\"B_7yrz6G\",\"notes_前端八股文_01html.md\":\"v1PlK2Q5\",\"notes_前端八股文_02css.md\":\"BduISswS\",\"notes_前端八股文_index.md\":\"CcJhpuso\",\"notes_前端八股文_05计算机网络.md\":\"DtAIgp9t\",\"notes_前端八股文_07性能优化.md\":\"Bwh2nwH_\",\"notes_前端八股文_04vue.md\":\"D9RlXlPP\",\"notes_后端储备_01django进阶学习笔记.md\":\"CksNiAix\",\"notes_前端八股文_06浏览器原理.md\":\"lro7OzkJ\",\"notes_前端八股文_03javascript.md\":\"l7aaFOmb\",\"notes_后端储备_03redis学习笔记.md\":\"DkTZQAkl\",\"notes_微前端设计与实现_05其他.md\":\"BUv38xkA\",\"notes_后端储备_index.md\":\"DFuyr1xI\",\"notes_数据库01_01数据库系统概述.md\":\"CBq4YT_l\",\"notes_微前端设计与实现_01前端概览.md\":\"CrxQJDK6\",\"notes_微前端设计与实现_02微前端原则.md\":\"JgNwdkK0\",\"notes_微前端设计与实现_04探索微前端架构.md\":\"wSQUmfzM\",\"notes_数据库01_02关系数据库.md\":\"CvWgfHwt\",\"notes_微前端设计与实现_03微前端的架构和挑战.md\":\"30KBk8ow\",\"notes_数据库01_07数据库设计.md\":\"3quWuDja\",\"notes_数据库01_06关系数据理论(重点).md\":\"CzMUuwjl\",\"notes_后端储备_02drf学习笔记.md\":\"BhLob6us\",\"notes_数据库01_index.md\":\"BuDS_gRI\",\"notes_数据库01_05数据库管理与维护(重点).md\":\"BH2daMaS\",\"notes_算法与数据结构_01基础概念.md\":\"Ca-nkqVW\",\"notes_数据库01_03sql(重点).md\":\"3WS0qj0p\",\"notes_算法与数据结构_06图.md\":\"CY620lwU\",\"notes_算法与数据结构_02线性表.md\":\"BlKr5BpX\",\"notes_算法与数据结构_04数组.md\":\"Ce32E4Fe\",\"notes_算法与数据结构_08排序.md\":\"wBs-UNJa\",\"notes_算法与数据结构_index.md\":\"9tjdH3yw\",\"notes_算法与数据结构_12动态规划.md\":\"Cj-SlLrX\",\"posts_2021_04_01scrapy爬虫详解.md\":\"B2xfkcoE\",\"notes_算法与数据结构_05树.md\":\"B6tNMAcx\",\"posts_2020_06_01java迷宫.md\":\"Dw1F6HW9\",\"posts_2021_08_04散列表实现查找.md\":\"yxiWYR3F\",\"posts_2020_06_02使用anaconda中的prompt配置虚拟环境的常用命令.md\":\"Pxw3efoS\",\"posts_2022_02_03这道题原来可以用到js这么多知识点！.md\":\"BdwNCQOH\",\"notes_算法与数据结构_07查找.md\":\"BDGyM2wH\",\"posts_2022_02_01都2022年了，还是得学圣杯布局与双飞翼布局.md\":\"CaOKsjoS\",\"posts_2023_01_28了解api相关范式(rpc、rest、graphql).md\":\"D94cMrH4\",\"posts_2023_02_17聊聊源策略限制ajax请求.md\":\"DJ_KEdhz\",\"posts_2023_02_04vue3相关原理梳理.md\":\"BWj0f_ZO\",\"posts_2023_02_19放弃cookie-session，拥抱jwt？.md\":\"hRYuYBLT\",\"posts_2023_02_23你可能忽略的10种javascript快乐写法.md\":\"D4wLgf5D\",\"posts_2023_03_29前端自给自足ui设计稿.md\":\"DO2UfYrM\",\"posts_2023_03_31极简地给个人博客添加订阅功能.md\":\"1Qg1Q_3U\",\"posts_2023_03_06三个经典的typescript易混淆点.md\":\"Dj36HR-v\",\"posts_2023_03_22聊聊前后端分离(历史、职责划分、未来发展).md\":\"C11UfwKD\",\"posts_2023_04_05实现微信小程序(uniapp)上传头像至阿里云oss.md\":\"BUWfHGrM\",\"posts_2023_04_17我终于会用docker了(nest_prisma_psotgresql_nginx_https).md\":\"Dc2Kz0cd\",\"posts_2023_04_23nest如何实现带身份验证的graphql订阅subscription.md\":\"Fj2m5r--\",\"posts_2023_05_07两个多月捣鼓了一个健康类小程序.md\":\"BLJ0oPrE\",\"posts_2023_04_20vue3_ts(uniapp)手撸一个聊天页面.md\":\"CQZk-E_P\",\"posts_2023_08_22web架构jamstack“以动制静”.md\":\"Dgr_JZx5\",\"posts_2023_08_31原来vue还有这么多好用的ui库.md\":\"BDtPNXJA\",\"posts_2023_09_29vitepress中引入tdesign并全局增加大图预览.md\":\"DFkas1ef\",\"posts_2023_09_29自托管项目工具plane管理自己的todolist.md\":\"DXE0cELv\",\"posts_2023_08_29你来你也可以做一个网盘搜索引擎.md\":\"DXF-aCKN\",\"posts_2023_11_01搞个域名邮箱玩玩（如just@justin3go.com）.md\":\"3HPN_yYw\",\"posts_2023_11_08看看openai发布会.md\":\"UWvMt32J\",\"posts_2023_11_14在uniapp中使用graphql的一些探索.md\":\"DWdlCWWF\",\"posts_2023_09_28vitepress中增加twitter卡片.md\":\"xaZuupr8\",\"posts_2024_01_03天冷了，笔记本也需要保暖了.md\":\"BaiSUoRu\",\"posts_2023_12_11股票基金常用指标、方法解释.md\":\"D-VgXm-n\",\"posts_2023_11_29游标分页较传统分页的优势以及详细实现.md\":\"2dqa8pWE\",\"posts_2024_01_12写个docker_nginx部https的模板.md\":\"bssPYD-G\",\"posts_2024_02_18又一次开始学英语了，希望这次能享受它.md\":\"XX36hIos\",\"posts_2024_04_28如何讨好读者或观众.md\":\"DWjnfLmO\",\"posts_2024_07_30-third-reconstruction-personal-blog-vitepress.md\":\"COg7WkF_\",\"posts_2024_04_18最近gpt帮我解决的30个问题.md\":\"CEYA-db5\",\"notes_算法与数据结构_14回溯与分支界限.md\":\"BSjrlgQj\",\"posts_2022_10_13cdn实践配置_原理篇.md\":\"DuSoccKh\",\"posts_2025_01_idea.md\":\"CCdRpBzy\",\"posts_2024_01_26nuxt3手写一个搜索页面.md\":\"DX2esx0q\",\"notes_算法与数据结构_13贪心算法.md\":\"BX0l8ocr\",\"posts_2024_10_21-wechat-mini-program-dom-open-type-capability.md\":\"26w-dyW9\",\"posts_2025_01_github配置ssh.md\":\"G0eUBU6a\",\"posts_2023_01_08javascript专题-继承.md\":\"CvK1Fqvz\",\"posts_2022_10_16获取object的第一个元素.md\":\"Cdk_MRnO\",\"posts_2022_06_09node模块规范及模块加载机制.md\":\"DXtXjRVS\",\"posts_2022_06_11node内存控制.md\":\"BYF3ND13\",\"posts_2022_02_04git常用操作.md\":\"BNCLFBo_\",\"posts_2022_10_14超详细的前端程序员git指北.md\":\"BYX4dhwd\",\"posts_2022_05_06玩转vitepress.md\":\"3H_EiT0i\",\"posts_2023_01_25浅谈nestjs设计思想.md\":\"COc4Xzsy\",\"posts_2022_10_15javascript基础-replace方法的第二个参数.md\":\"EDYf3ETH\",\"posts_2022_06_08前端构建的学习(偏向vite).md\":\"ypkrDoHE\",\"posts_2022_02_02typescript入门.md\":\"B_cC0tZF\",\"notes_算法与数据结构_15经典算法实现.md\":\"QB2S_aqV\",\"posts_2023_01_02javascript专题-原型链.md\":\"D9ZToZhR\",\"posts_2022_06_10node异步实现与事件驱动.md\":\"Bx5mS8Pc\",\"notes_算法与数据结构_11递归与分治.md\":\"pWzKagL5\",\"notes_计算机基础知识_01操作系统基础.md\":\"WoCG-_GR\",\"posts_2022_06_12node进程及集群相关.md\":\"BtfOoAKp\",\"notes_计算机基础知识_index.md\":\"C_zbVo28\",\"posts_2021_04_02tfidf计算的学习.md\":\"v_WocePY\",\"posts_2021_08_03操作系统内存分配模拟程序.md\":\"CMidq-m1\",\"posts_2022_05_05前端程序员搭建自己的codeide（code-server教程）.md\":\"Cs3BscoN\",\"posts_2023_05_01nest的test中的best是jest框架.md\":\"CTKCPBHm\",\"notes_算法与数据结构_03栈和队列.md\":\"BWe_Q23-\",\"posts_2023_05_11该给系统加哪一个权限控制模型呢.md\":\"Dfy12OKe\",\"posts_2023_05_09pixijs快速一览.md\":\"C8ICiNuI\",\"posts_2023_04_26试下微调gpt-3做一个心理问答机器人.md\":\"DxYElf6p\",\"posts_2023_08_18给vitepress增加短链接生成功能.md\":\"7gcDjlwA\",\"posts_2023_08_17浅谈搜索引擎原理.md\":\"BCQ0m-rm\",\"posts_2023_07_02前端双token策略(uniapp-vue3-ts版).md\":\"BUYn3eha\",\"posts_2023_06_06简单优化下个人博客首页(迁移vitepress-beta版).md\":\"CWoj45HD\",\"posts_2022_05_07intersectionobserver实现横竖滚动自适应懒加载.md\":\"DDoEESde\",\"posts_2023_06_18vitepress博客里增加一个rss订阅.md\":\"C4zougIZ\",\"notes_算法与数据结构_16剑指offer.md\":\"W8T-11ZO\",\"posts_2023_07_26(译)面向javascript开发人员的docker简介（node.js 和 postgresql）.md\":\"BQ4Qi3AV\",\"notes_算法与数据结构_10算法概述.md\":\"BQ98VhCO\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":[2,4],\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"placeholder\":\"搜索文档\",\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"清除查询条件\",\"resetButtonAriaLabel\":\"清除查询条件\",\"cancelButtonText\":\"取消\",\"cancelButtonAriaLabel\":\"取消\"},\"startScreen\":{\"recentSearchesTitle\":\"搜索历史\",\"noRecentSearchesText\":\"没有搜索历史\",\"saveRecentSearchButtonTitle\":\"保存至搜索历史\",\"removeRecentSearchButtonTitle\":\"从搜索历史中移除\",\"favoriteSearchesTitle\":\"收藏\",\"removeFavoriteSearchButtonTitle\":\"从收藏中移除\"},\"errorScreen\":{\"titleText\":\"无法获取结果\",\"helpText\":\"你可能需要检查你的网络连接\"},\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\",\"searchByText\":\"搜索提供者\"},\"noResultsScreen\":{\"noResultsText\":\"无法找到相关结果\",\"suggestedQueryText\":\"你可以尝试查询\",\"reportMissingResultsText\":\"你认为该查询应该有结果？\",\"reportMissingResultsLinkText\":\"点击反馈\"}}}}}}},\"externalLinkIcon\":true},\"locales\":{\"root\":{\"label\":\"简体中文\",\"title\":\"Alpen\",\"description\":\"坚持深耕技术领域的 T 型前端程序员, 关注独立开发与 AI，喜欢 Vuejs、Nestjs, 还会点 Python、搜索引擎、NLP、Web3、后端\",\"lang\":\"zh-Hans\",\"themeConfig\":{\"nav\":[{\"text\":\"博客\",\"link\":\"/\"},{\"text\":\"归档\",\"link\":\"/archive\",\"activeMatch\":\"/archive\"},{\"text\":\"笔记\",\"link\":\"/notes/\",\"activeMatch\":\"/notes/\"},{\"text\":\"关于\",\"link\":\"/about\",\"activeMatch\":\"/about\"}],\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"outlineTitle\":\"当前页面\",\"lastUpdatedText\":\"最近更新时间\",\"sidebar\":{\"/notes/\":[{\"text\":\"Python基础\",\"collapsed\":false,\"items\":[{\"text\":\"01python数据模型\",\"link\":\"/notes/Python基础/01python数据模型\"},{\"text\":\"02序列构成的数组\",\"link\":\"/notes/Python基础/02序列构成的数组\"},{\"text\":\"03字典与集合\",\"link\":\"/notes/Python基础/03字典与集合\"},{\"text\":\"04文本与字节序列\",\"link\":\"/notes/Python基础/04文本与字节序列\"},{\"text\":\"05一等函数\",\"link\":\"/notes/Python基础/05一等函数\"},{\"text\":\"06使用一等函数实现设计模式\",\"link\":\"/notes/Python基础/06使用一等函数实现设计模式\"},{\"text\":\"07函数装饰器与闭包\",\"link\":\"/notes/Python基础/07函数装饰器与闭包\"},{\"text\":\"08对象引用、可变性和垃圾回收\",\"link\":\"/notes/Python基础/08对象引用、可变性和垃圾回收\"},{\"text\":\"09符合python风格的对象\",\"link\":\"/notes/Python基础/09符合python风格的对象\"},{\"text\":\"10序列的修改、散列和切片\",\"link\":\"/notes/Python基础/10序列的修改、散列和切片\"},{\"text\":\"11接口：从协议到抽象基类\",\"link\":\"/notes/Python基础/11接口：从协议到抽象基类\"},{\"text\":\"12继承的优缺点\",\"link\":\"/notes/Python基础/12继承的优缺点\"},{\"text\":\"13正确重载运算符\",\"link\":\"/notes/Python基础/13正确重载运算符\"},{\"text\":\"14可迭代的对象、迭代器和生成器\",\"link\":\"/notes/Python基础/14可迭代的对象、迭代器和生成器\"},{\"text\":\"15上下文管理和else块\",\"link\":\"/notes/Python基础/15上下文管理和else块\"},{\"text\":\"16协程\",\"link\":\"/notes/Python基础/16协程\"},{\"text\":\"17使用future处理并发\",\"link\":\"/notes/Python基础/17使用future处理并发\"},{\"text\":\"18使用asyncio包处理并发\",\"link\":\"/notes/Python基础/18使用asyncio包处理并发\"},{\"text\":\"19元编程\",\"link\":\"/notes/Python基础/19元编程\"}]},{\"text\":\"threejs入门\",\"collapsed\":true,\"items\":[{\"text\":\"01起步\",\"link\":\"/notes/threejs入门/01起步\"},{\"text\":\"02一个基本的threejs应用\",\"link\":\"/notes/threejs入门/02一个基本的threejs应用\"},{\"text\":\"03基于物理的渲染和照明\",\"link\":\"/notes/threejs入门/03基于物理的渲染和照明\"},{\"text\":\"04变换、坐标系和场景图\",\"link\":\"/notes/threejs入门/04变换、坐标系和场景图\"},{\"text\":\"05动画循环\",\"link\":\"/notes/threejs入门/05动画循环\"},{\"text\":\"06纹理映射\",\"link\":\"/notes/threejs入门/06纹理映射\"},{\"text\":\"07插件\",\"link\":\"/notes/threejs入门/07插件\"},{\"text\":\"08环境光\",\"link\":\"/notes/threejs入门/08环境光\"},{\"text\":\"09组织你的场景\",\"link\":\"/notes/threejs入门/09组织你的场景\"},{\"text\":\"10内置几何体\",\"link\":\"/notes/threejs入门/10内置几何体\"},{\"text\":\"11以gLTF格式加载3D模型\",\"link\":\"/notes/threejs入门/11以gLTF格式加载3D模型\"},{\"text\":\"12threejs动画系统\",\"link\":\"/notes/threejs入门/12threejs动画系统\"}]},{\"text\":\"Rust基础学习\",\"collapsed\":true,\"items\":[{\"text\":\"01认识Cargo\",\"link\":\"/notes/Rust基础学习/01认识Cargo\"},{\"text\":\"02变量绑定与解构\",\"link\":\"/notes/Rust基础学习/02变量绑定与解构\"},{\"text\":\"03基本类型\",\"link\":\"/notes/Rust基础学习/03基本类型\"},{\"text\":\"04所有权与借用\",\"link\":\"/notes/Rust基础学习/04所有权与借用\"},{\"text\":\"05复合类型\",\"link\":\"/notes/Rust基础学习/05复合类型\"},{\"text\":\"06流程控制\",\"link\":\"/notes/Rust基础学习/06流程控制\"},{\"text\":\"07模式匹配\",\"link\":\"/notes/Rust基础学习/07模式匹配\"},{\"text\":\"08方法Method\",\"link\":\"/notes/Rust基础学习/08方法Method\"},{\"text\":\"09泛型\",\"link\":\"/notes/Rust基础学习/09泛型\"},{\"text\":\"10特征\",\"link\":\"/notes/Rust基础学习/10特征\"},{\"text\":\"11特征对象\",\"link\":\"/notes/Rust基础学习/11特征对象\"},{\"text\":\"12深入特征\",\"link\":\"/notes/Rust基础学习/12深入特征\"},{\"text\":\"13动态数组Vector\",\"link\":\"/notes/Rust基础学习/13动态数组Vector\"},{\"text\":\"14KV存储HashMap\",\"link\":\"/notes/Rust基础学习/14KV存储HashMap\"},{\"text\":\"15认识生命周期\",\"link\":\"/notes/Rust基础学习/15认识生命周期\"},{\"text\":\"16返回值和错误处理\",\"link\":\"/notes/Rust基础学习/16返回值和错误处理\"},{\"text\":\"17包和模块\",\"link\":\"/notes/Rust基础学习/17包和模块\"},{\"text\":\"18注释和文档\",\"link\":\"/notes/Rust基础学习/18注释和文档\"},{\"text\":\"19格式化输出\",\"link\":\"/notes/Rust基础学习/19格式化输出\"},{\"text\":\"20实战-文件搜索工具\",\"link\":\"/notes/Rust基础学习/20实战-文件搜索工具\"}]},{\"text\":\"微前端设计与实现笔记\",\"collapsed\":true,\"items\":[{\"text\":\"01前端概览\",\"link\":\"/notes/微前端设计与实现/01前端概览\"},{\"text\":\"02微前端原则\",\"link\":\"/notes/微前端设计与实现/02微前端原则\"},{\"text\":\"03微前端的架构和挑战\",\"link\":\"/notes/微前端设计与实现/03微前端的架构和挑战\"},{\"text\":\"04探索微前端架构\",\"link\":\"/notes/微前端设计与实现/04探索微前端架构\"},{\"text\":\"05其他\",\"link\":\"/notes/微前端设计与实现/05其他\"}]},{\"text\":\"ChatGPT提示学习笔记\",\"collapsed\":true,\"items\":[{\"text\":\"1_2引言—指示\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记1_2\"},{\"text\":\"3迭代\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记3\"},{\"text\":\"4摘要\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记4\"},{\"text\":\"5推理\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记5\"},{\"text\":\"6转换\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记6\"},{\"text\":\"7扩展\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记7\"},{\"text\":\"8聊天机器人\",\"link\":\"/notes/ChatGPT提示学习/ChatGPT提示学习笔记8\"}]},{\"text\":\"算法与数据结构\",\"collapsed\":true,\"items\":[{\"text\":\"基础概念\",\"link\":\"/notes/算法与数据结构/01基础概念\"},{\"text\":\"线性表\",\"link\":\"/notes/算法与数据结构/02线性表\"},{\"text\":\"栈和队列\",\"link\":\"/notes/算法与数据结构/03栈和队列\"},{\"text\":\"数组\",\"link\":\"/notes/算法与数据结构/04数组\"},{\"text\":\"树\",\"link\":\"/notes/算法与数据结构/05树\"},{\"text\":\"图\",\"link\":\"/notes/算法与数据结构/06图\"},{\"text\":\"查找\",\"link\":\"/notes/算法与数据结构/07查找\"},{\"text\":\"排序\",\"link\":\"/notes/算法与数据结构/08排序\"},{\"text\":\"算法概述\",\"link\":\"/notes/算法与数据结构/10算法概述\"},{\"text\":\"递归与分治\",\"link\":\"/notes/算法与数据结构/11递归与分治\"},{\"text\":\"动态规划\",\"link\":\"/notes/算法与数据结构/12动态规划\"},{\"text\":\"贪心算法\",\"link\":\"/notes/算法与数据结构/13贪心算法\"},{\"text\":\"回溯与分支极限\",\"link\":\"/notes/算法与数据结构/14回溯与分支界限\"},{\"text\":\"经典算法实现\",\"link\":\"/notes/算法与数据结构/15经典算法实现\"},{\"text\":\"剑指Offer\",\"link\":\"/notes/算法与数据结构/16剑指Offer\"}]},{\"text\":\"计算机基础知识\",\"collapsed\":true,\"items\":[{\"text\":\"操作系统基础\",\"link\":\"/notes/计算机基础知识/01操作系统基础\"}]},{\"text\":\"数据库一期\",\"collapsed\":true,\"items\":[{\"text\":\"数据库系统概述\",\"link\":\"/notes/数据库01/01数据库系统概述\"},{\"text\":\"关系数据库\",\"link\":\"/notes/数据库01/02关系数据库\"},{\"text\":\"SQL(重点)\",\"link\":\"/notes/数据库01/03SQL(重点)\"},{\"text\":\"数据库管理与维护(重点)\",\"link\":\"/notes/数据库01/05数据库管理与维护(重点)\"},{\"text\":\"关系数据理论(重点)\",\"link\":\"/notes/数据库01/06关系数据理论(重点)\"},{\"text\":\"数据库设计\",\"link\":\"/notes/数据库01/07数据库设计\"}]},{\"text\":\"JavaScript[待更新]\",\"collapsed\":true,\"items\":[{\"text\":\"JS常见手写面试题\",\"link\":\"/notes/JavaScript/01JS常见手写面试题\"}]},{\"text\":\"CSS相关[待更新]\",\"collapsed\":true,\"items\":[{\"text\":\"Flex_布局教程：语法篇\",\"link\":\"/notes/CSS相关/Flex_布局教程：语法篇\"}]},{\"text\":\"Vue相关\",\"collapsed\":true,\"items\":[{\"text\":\"Vue3是如何运行的\",\"link\":\"/notes/Vue相关/01Vue3是如何运行的\"},{\"text\":\"Vue3编译器\",\"link\":\"/notes/Vue相关/02Vue3编译器\"},{\"text\":\"虚拟DOM\",\"link\":\"/notes/Vue相关/03虚拟DOM\"},{\"text\":\"Vue3-Reactivity\",\"link\":\"/notes/Vue相关/04Vue3-Reactivity\"},{\"text\":\"Mini-Vue\",\"link\":\"/notes/Vue相关/05Mini-Vue\"},{\"text\":\"Vue3其他\",\"link\":\"/notes/Vue相关/06Vue3其他\"}]},{\"text\":\"NestJS\",\"collapsed\":true,\"items\":[{\"text\":\"controller\",\"link\":\"/notes/NestJS/01controller\"},{\"text\":\"service\",\"link\":\"/notes/NestJS/02service\"},{\"text\":\"module\",\"link\":\"/notes/NestJS/03module\"},{\"text\":\"DTO\",\"link\":\"/notes/NestJS/04DTO\"},{\"text\":\"postgreSQL\",\"link\":\"/notes/NestJS/05postgreSQL\"},{\"text\":\"原理细节\",\"link\":\"/notes/NestJS/06原理细节\"},{\"text\":\"应用配置\",\"link\":\"/notes/NestJS/07应用配置\"},{\"text\":\"更多模块\",\"link\":\"/notes/NestJS/08更多模块\"},{\"text\":\"openAPI\",\"link\":\"/notes/NestJS/09openAPI\"},{\"text\":\"测试\",\"link\":\"/notes/NestJS/10测试\"}]},{\"text\":\"前端八股文\",\"collapsed\":true,\"items\":[{\"text\":\"HTML\",\"link\":\"/notes/前端八股文/01HTML\"},{\"text\":\"CSS\",\"link\":\"/notes/前端八股文/02CSS\"},{\"text\":\"JavaScript\",\"link\":\"/notes/前端八股文/03JavaScript\"},{\"text\":\"Vue\",\"link\":\"/notes/前端八股文/04Vue\"},{\"text\":\"计算机网络\",\"link\":\"/notes/前端八股文/05计算机网络\"},{\"text\":\"浏览器原理\",\"link\":\"/notes/前端八股文/06浏览器原理\"},{\"text\":\"性能优化\",\"link\":\"/notes/前端八股文/07性能优化\"}]},{\"text\":\"后端储备\",\"collapsed\":true,\"items\":[{\"text\":\"Django进阶学习笔记\",\"link\":\"/notes/后端储备/01Django进阶学习笔记\"},{\"text\":\"DRF学习笔记\",\"link\":\"/notes/后端储备/02DRF学习笔记\"},{\"text\":\"Redis学习笔记\",\"link\":\"/notes/后端储备/03Redis学习笔记\"}]},{\"text\":\"Web3.0\",\"collapsed\":true,\"items\":[{\"text\":\"Solidity8新特性\",\"link\":\"/notes/Web3.0/00Solidity8新特性\"},{\"text\":\"Solidity8基本语法\",\"link\":\"/notes/Web3.0/01Solidity8基本语法\"},{\"text\":\"Solidity8高级\",\"link\":\"/notes/Web3.0/02Solidity8高级\"},{\"text\":\"Solidity8进阶\",\"link\":\"/notes/Web3.0/03Solidity8进阶\"}]},{\"text\":\"AI相关[待更新]\",\"collapsed\":true,\"items\":[]}]},\"socialLinks\":[{\"icon\":{\"svg\":\"<svg t=\\\"1710861492265\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34.1c1.7 1 3.3 1.7 5.2 1.7 5 0 9-4.1 9-9.1 0-2.2-0.8-4.3-1.4-6.6-3.8-13.7-9.8-35.3-12.2-43.9-0.5-1.9-0.9-3.8-0.9-5.7 0.1-6.1 3-11.4 7.5-14.9zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z\\\" fill=\\\"currentColor\\\"></path></svg>\"},\"link\":\"javascript:;\",\"ariaLabel\":\"wechat\"},{\"icon\":\"github\",\"link\":\"https://github.com/Alpenl\"}],\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"目录\",\"darkModeSwitchLabel\":\"深色模式\"}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>